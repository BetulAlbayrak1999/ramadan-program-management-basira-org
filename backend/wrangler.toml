name = "ramadan-program-backend"
main = "worker.py"
compatibility_flags = ["python_workers"]
compatibility_date = "2024-01-01"
# Exclude documentation and metadata
[[rules]]
type = "Text"
globs = ["**/*.md", "**/*.txt", "**/*.rst"]
fallthrough = true

# Exclude test files
[[rules]]
type = "Text"
globs = ["**/tests/**", "**/*_test.py", "**/test_*.py"]
fallthrough = true

# Exclude development files
[[rules]]
type = "Text"
globs = ["**/.git/**", "**/.venv/**", "**/__pycache__/**", "**/*.pyc"]
fallthrough = true

# Bindings for environment variables

# Cron Triggers for scheduled tasks
[triggers]
# Auto-initialize database: Runs EVERY MINUTE to catch new deployments
# Once DB is initialized, subsequent runs just confirm health (fast check)
# Change to "0 0 * * *" (daily) after DB is stable
crons = ["* * * * *"]

# D1 Database binding (Cloudflare's SQLite-based database)
[[d1_databases]]
binding = "DB"
database_name = "ramadan-db"
database_id = "2c984382-7aeb-49d3-8119-9b2cad25524d"

# For Workers AI (if needed)
# [ai]
# binding = "AI"


